"use strict";function forceReload(){location.reload(!0)}var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),AUTH_KEY="$auth",AppBar=function(t){var e=t.updateReady?preact.h("a",{class:"upgrade icon",onClick:forceReload},preact.h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},preact.h("path",{d:"M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-1-6h-3V8h-2v5H8l4 4 4-4z"}))):null;return preact.h("header",null,preact.h("a",{class:"menu icon"},preact.h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},preact.h("path",{d:"M2 13.5h14V12H2v1.5zm0-4h14V8H2v1.5zM2 4v1.5h14V4H2z"}))),preact.h("span",{class:"title"},"Overcast"),e)},Login=function(t){return preact.h("form",{onSubmit:t.authenticate},preact.h("fieldset",null,preact.h("div",{class:"cell"},preact.h("input",{type:"url",name:"base",required:!0,placeholder:"https://api.airtable.com/v0/",autocomplete:"url",autofocus:!0}),preact.h("label",{for:"base"},"Base")),preact.h("div",{class:"cell"},preact.h("input",{type:"text",name:"token",required:!0,inputMode:"verbatim"}),preact.h("label",{for:"token"},"Token")),preact.h("div",{class:"cell"},preact.h("button",{type:"submit"},"Authenticate"))))},App=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={auth:e._auth()},e._authenticate=function(t){t.preventDefault();var a=t.currentTarget,n=Array.prototype.slice.call(a.querySelectorAll("input")),r=n.reduce(function(t,e){return t[e.name]=e.value,t},{});localStorage.setItem(AUTH_KEY,JSON.stringify(r)),e._onStorage()},e._onStorage=function(){e.setState({auth:e._auth()})},e._onUpdateReady=function(){e.setState({updateReady:applicationCache.status===applicationCache.UPDATEREADY})},e}return __extends(e,t),e.prototype.render=function(){var t=null===this.state.auth?preact.h(Login,{authenticate:this._authenticate}):preact.h("pre",null,this.state.auth.base);return preact.h("div",{class:"app"},preact.h(AppBar,{updateReady:this.state.updateReady}),preact.h("main",null,t))},e.prototype.componentWillMount=function(){applicationCache.addEventListener("updateready",this._onUpdateReady),window.addEventListener("storage",this._onStorage)},e.prototype.componentWillUnmount=function(){applicationCache.removeEventListener("updateready",this._onUpdateReady),window.removeEventListener("storage",this._onStorage)},e.prototype._auth=function(){var t=localStorage.getItem(AUTH_KEY);return"string"==typeof t?JSON.parse(t):t},e}(preact.Component);window.addEventListener("load",function(){preact.render(preact.h(App,null),document.body)});
//# sourceMappingURL=dist/19bf4e7762c700428dcce097.map